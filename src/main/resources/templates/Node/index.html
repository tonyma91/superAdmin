<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/Css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/Css/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="/Css/style.css" />

<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/semantic-ui/2.2.4/semantic.min.css">-->
<!--    <link rel="stylesheet" href="../../static/lib/editormd/css/editormd.min.css" th:href="@{/lib/editormd/css/editormd.min.css}">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>-->


    <script type="text/javascript" src="/Js/jquery.js"></script>
    <script type="text/javascript" src="/Js/jquery.sorted.js"></script>
    <script type="text/javascript" src="/Js/bootstrap.js"></script>
    <script type="text/javascript" src="/Js/ckform.js"></script>
    <script type="text/javascript" src="/Js/common.js"></script>

    <style type="text/css">
        body {
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }

        @media (max-width: 980px) {
            /* Enable use of floated navbar text */
            .navbar-text.pull-right {
                float: none;
                padding-left: 5px;
                padding-right: 5px;
            }
        }


    </style>
</head>
<body>
<form class="form-inline definewidth m20" action="/searchNode" method="get">
    机构名称：
    <input type="text" name="organname" id="organname"class="abc input-default" placeholder="" value="">&nbsp;&nbsp;
    <button type="submit" class="btn btn-primary">查询</button>&nbsp;&nbsp; <button type="button" class="btn btn-success" id="addnew">新增机构</button>
</form>
<div id="table-container">
<table class="table table-bordered table-hover definewidth m10" >
    <thead>
    <tr>
        <th>机构编号</th>
        <th>机构名称</th>
        <th>状态</th>
        <th>管理操作</th>
    </tr>
    </thead>
    <tr th:each="organ : ${page.content}">
        <td  th:text="${organ.id}">5</td>
        <td  th:text="${organ.organname}">管理员</td>
        <td  th:text="${organ.status}">1</td>
        <td>
            <a href="#" th:href="@{/organ/{id}/toUpdate(id=${organ.id})}">编辑</a>
            <a href="#" th:href="@{/organ/{id}/delete(id=${organ.id})}">删除</a>
        </td>
    </tr>

</table>
</div>

<div class="inline pull-right page">
    <div class="ui mini pagination menu" th:if="${page.totalPages}>1" >

        <a onclick="page(this)" th:href="@{nodeMange(page=${page.number}-1)}" class="item" th:unless="${page.first}">上一页</a>
        <a onclick="page(this)" th:href="@{nodeMange(page=${page.number}+1)}" class=" item" th:unless="${page.last}">下一页</a>
    </div>
</div>
</body>
</html>

<script>
    $(function () {

        $('#addnew').click(function(){
            self.location.href="/toAddOrgan";
        });


    });
    function del(id)
    {
        if(confirm("确定要删除吗？"))
        {
            var url = "index.html";
            window.location.href=url;
        }
    };
    function page(obj) {
        $("[name='page']").val($(obj).data("page"));
        loaddata();
    }

    function loaddata() {
        $("#table-container").load(/*[[@{/admin/news/search}]]*/"/nodeMange",{
            id : $("[name='id']").val(),
            organname : $("[name='organname']").val(),
            status : $("[name='status']").val(),
            page : $("[name='page']").val()
        });
    }

</script>




